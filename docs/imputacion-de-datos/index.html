<!DOCTYPE html>
<html lang="es-es" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Imputación de datos &middot; R con R</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="../favicon.ico" />
    <link rel="canonical" href="../imputacion-de-datos/" />

     <meta name="description" content="Imputación de datos en R Introducción Estás preparado para aplicar todo el conocimiento para estrujar esa base, pero te encuentras con un problema… Faltan datos" /> 

     
    
    <meta name="twitter:card" content="summary"/>
    
 
    <meta name="twitter:title" content="Imputación de datos"/>
    <meta name="twitter:description" content="Imputación de datos en R Introducción Estás preparado para aplicar todo el conocimiento para estrujar esa base, pero te encuentras con un problema… Faltan datos"/>
    <meta name="twitter:url" content="/imputacion-de-datos/" />
    <meta name="twitter:site" content="@faketryghost"/>

    <meta property="og:site_name" content="R con R" />
    <meta property="og:title" content="Imputación de datos &middot; Hugo Casper Two" />
    <meta property="og:url" content="/imputacion-de-datos/" />
    <meta property="article:publisher" content="https://www.facebook.com/fakeghost" />

    <meta property="og:type" content="article" />
    <meta property="og:description" content="Imputación de datos en R Introducción Estás preparado para aplicar todo el conocimiento para estrujar esa base, pero te encuentras con un problema… Faltan datos" />

    <meta property="article:published_time" content="2018-03-05T00:00:00Z" />
    <meta property="article:tag" content="Imputación" /><meta property="article:tag" content="PCA" />

    <meta property="og:image" content="/img/blog-cover.jpg"/>

    <meta name="generator" content="Hugo 0.36.1" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="../built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="../css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    

     

</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">
        <a class="site-nav-logo" href="#"><img src="../hugo-logo.png" alt="Hugo Casper Two" /></a>

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="../">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="../tags/golang/">Go</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="../categories/food/">Food</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="https://google.com/">External</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    <a class="social-link social-link-fb" href="https://www.facebook.com/fakeghost" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a>

                    <a class="social-link social-link-tw" href="https://twitter.com/faketryghost" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a>

                    <a class="social-link" href="https://github.com/eueung" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    

                    
        </div>  
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post"> 
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2018-03-05">5 March 2018</time>
                <span class="date-divider">/</span> <a href="../tags/imputaci%C3%B3n/">#Imputación</a>&nbsp;<a href="../tags/pca/">#PCA</a>&nbsp;
        </section>
        <h1 class="post-full-title">Imputación de datos</h1>
    </header>
    
    <figure class="post-full-image" style="background-image: url(/defimg/5.jpg)">
    </figure>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        <div id="imputacion-de-datos-en-r" class="section level1">
<h1>Imputación de datos en R</h1>
<div id="introduccion" class="section level2">
<h2>Introducción</h2>
<p>Estás preparado para aplicar todo el conocimiento para estrujar esa base,
pero te encuentras con un problema… Faltan datos. Casos incompletos, escalas
sin pasar, <em>dropouts</em>, o que el pobre desgraciado del interno asignado para
pasar los datos al ordenador era un poco vago… Pues en ciencias y sobretodo
en las ciencias de la salud, lo más común encontrar bases de datos incompletas.
Por otra parte, la mayoría de los análisis estadísticos requieren que <em>casos</em>
completos por lo que hay que hacer <em>algo</em> con los <strong>valores ausentes</strong> (NA’s).</p>
<p>Una alternativa fácil es <em>eliminar</em> los NA’s. Ya está!, fuera con todos los
casos incompletos y palante… pero esto tiene dos problemas.
1. A menos número de casos disminuye la potencia del estudio,
y esto no es bueno, no?
2. Hay un sesgo de selección si es que la falta de datos tiene relación con
alguna de las variables relevantes (dependientes o indepes)</p>
<p>Pues ¿qué diablos hacemos entonces? Podemos <em>imputar</em> los datos que faltan,
que no es un insulto… a continuación intentare dar alguna pincelada de técnicas
para <em>imputar</em> los datos faltantes en una base..</p>
</div>
<div id="analisis-exploratorio-de-nas" class="section level2">
<h2>Análisis exploratorio de NA’s</h2>
<p>El primer paso como en cualquier trabajo de análisis de datos decente, implica un <em>análisis exploratorio</em> de los NA. En R esto esto se consigue fácil y de manera gráfica con a librería <code>VIM</code>.</p>
<pre class="r"><code># cargamos las librerías necesarias
pacman::p_load(tidyverse, VIM, lattice, missForest, mice)</code></pre>
<pre class="r"><code>set.seed(41)
# creamos un patrón aleatório de NA
mis_datos &lt;-
   diamonds %&gt;%
   sample_n(200) %&gt;%
   prodNA(noNA = 0.08)

mis_datos %&gt;%
    aggr(col=mdc(1:2), numbers=F, sortVars=T,
         cex.axis=.8, gap=3, only.miss = F, combined = F,
         ylab=c(&quot;Proportion of missingness&quot;,&quot;Missingness Pattern&quot;))</code></pre>
<p><img src="../rmarkdown-libs/figure-html4/unnamed-chunk-2-1.png" width="672" /></p>
<pre><code>## 
##  Variables sorted by number of missings: 
##  Variable Count
##       cut 0.105
##     table 0.100
##         x 0.095
##         y 0.095
##     depth 0.075
##     price 0.075
##         z 0.075
##     color 0.065
##   clarity 0.060
##     carat 0.055</code></pre>
<p>La función <code>VIM::aggr</code> permite tener una representación gráfica de los NA y permite ver el patrón que estos presentan.</p>
<div id="tipos-de-nas" class="section level3">
<h3>Tipos de NA’s</h3>
<p>Se pueden establecer tres tipos de patrones de <a href="https://en.wikipedia.org/wiki/Missing_data#Missing_at_random">valores ausentes:</a>
1. NA totalmente aleatorio (“missing completely at random, o MCAR”) en el que no hay un patrón establecido. El evento por el que hay un valor ausente es independiente de las variables observadas u otros parámetros de interés. Como sospechais es el patrón menos habitual…</p>
<ol start="2" style="list-style-type: decimal">
<li><p>NA aleatorio (“missing at random, o MAR”), en el cual la ausencia de datos no completamente aleatoria, pero en la que se puede dar cuenta de la información faltante con los datos existentes, es decir, en la que se puede hacer una estimación coherentes de los datos faltantes.</p></li>
<li><p>NA no aleatorio (“missing not at random o MNAR), en el que hay una relación directa entre el motivo de la ausencia de datos y su propio valor.</p></li>
</ol>
</div>
<div id="cantidad-de-nas" class="section level3">
<h3>Cantidad de NA’s</h3>
<p>% de NA</p>
<p>Cualquier técnica de imputación requiere de que los NA’s sigan un patrón MCAR o MAR. En casos en los que el patrón de NA’s siga un patrón de MNAR, hace necesario que posteriormente se deba hacer un <a href="https://en.wikipedia.org/wiki/Sensitivity_analysis">análisis de sensibilidad</a> para valorar la influencia de la imputación en el grado de incertidumbre del modelo generado. Si bien no es física cuántica, se lo parece, y si queréis adentraros en el tema hay una <a href="https://gerkovink.github.io/miceVignettes/Sensitivity_analysis/Sensitivity_analysis.html">viñeta</a> del paquete <code>mice</code> que trata de ello.</p>
</div>
</div>
<div id="metodos-de-imputacion-de-datos" class="section level2">
<h2>Métodos de imputación de datos</h2>
<div id="tendencia-central" class="section level3">
<h3>Tendencia central</h3>
<p>Una primera alternativa, la de <em>toda la vida</em>, es imputar con algún estadístico de tendencia central (media, mediana, moda). Es decir, cambiamos todos los NA por el promedio de los datos que <em>si</em> tenemos. ¿Ventajas? Fácil de hacer. ¿Problema? estamos disminuyendo artificialmente la variabilidad de la muestra. La implementación en R es relativamente fácil como se muestra a continuación, utilizando el universo de librerías <code>tidyverse</code>.</p>
<pre class="r"><code># función para calcular la moda estadística
calc_moda &lt;- function(x) {
    z &lt;- table(as.vector(x))
    names(z)[z == max(z)]
}

imp_media &lt;-
    mis_datos %&gt;%
# media para variables numéricas
    mutate_at(
       vars(carat, depth:z),
       funs(ifelse(is.na(.), mean(., na.rm = T), .))) %&gt;%
# moda para variables categóricas
    mutate_at(
       vars(cut:clarity),
       funs(as.ordered(ifelse(is.na(.), calc_moda(.), as.character(.)))))</code></pre>
<div id="revision-visual-de-imputaciones" class="section level4">
<h4>Revisión visual de imputaciones</h4>
<p>Con los datos imputados podemos ver gráficamente cuánto se ajusta nuestro <em>invento</em> con la base original.</p>
<pre class="r"><code>mis_datos$.imp &lt;- &quot;original&quot;
imp_media$.imp &lt;- &quot;imputado&quot;
imp_media %&gt;%
    rbind(mis_datos) %&gt;%
    select(carat, depth, price, z, .imp) %&gt;%
    gather(key, value, -.imp) %&gt;%
    ggplot(aes(x = value, color = .imp))+
    geom_density(size=0.8) +
    facet_wrap(~ key, scales = &quot;free&quot;) +
    scale_color_brewer(type = &quot;qual&quot;, palette = 6, direction = 1) +
    theme_minimal() + labs(title=&quot;Imputación con media aritmética - variables numéricas&quot;)</code></pre>
<p><img src="../rmarkdown-libs/figure-html4/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>imp_media %&gt;%
    rbind(mis_datos) %&gt;%
    select(color, cut, .imp) %&gt;%
    gather(key, value, -.imp) %&gt;%
    na.omit() %&gt;%
    ggplot(aes(x = value, fill = .imp))+
    geom_bar(alpha = 0.8, position = position_dodge()) +
    facet_wrap(~ key, scales = &quot;free&quot;) +
    scale_fill_brewer(type = &quot;qual&quot;, palette = 6, direction = 1) +
    theme_minimal() + labs(title=&quot;Imputación con moda - variables categóricas&quot;)</code></pre>
<p><img src="../rmarkdown-libs/figure-html4/unnamed-chunk-4-2.png" width="672" /></p>
<p>Es fácilmente apreciable como tanto en las variables numéricas como en las categóricas, la tendencia central está exagerada y se aleja de la distribución original.</p>
</div>
</div>
<div id="imputacion-multiple" class="section level3">
<h3>Imputación múltiple</h3>
<p>Una de las metodologías más utilizadas para la obtención de una muestra imputada más <em>correcta</em> es la que utiliza técnicas de imputación múltiple, es decir imputar más de una base de datos. Esto permite utilizar las <em>n</em> bases imputadas para hacer <em>n</em> modelos, que posteriormente se <em>poolean</em> (lo siento, no se como diablos se traduce eso…) con la ventaja de que el modelo final da cuenta de la incerteza del modelo.</p>
<p>La mayoría de las librerías permiten calibrar bastante la generación de la imputación, además de la metodología utilizada. Uno de los paquetes mejor documentados y <em>de moda</em> es el <a href="http://stefvanbuuren.github.io/mice/">mice</a></p>
<p>El proceso es relativamente fácil y está muy bien documentado en las viñetas. El método de imputación por definición es el <em>predictive mean matching</em> para variables numéricas, <em>logistic imputation</em> para categoriales binarias y <em>polytomous regression imputation</em> para categoriales de más de dos factores. Para la utilización se usa la función <code>mice</code> que genera un objetos <code>mids</code> con las <em>n</em> bases imputadas. La librería trae además varios <em>metodos</em> para utilizar directamente los objetos <code>mids</code> en modelos estadísticos como regresiones lineales.<br />
Funciona mejor o no? Pues lo miramos gráficamente…</p>
<pre class="r"><code>pacman::p_load(mice)
imp_mice &lt;- mice(select(mis_datos, -.imp))</code></pre>
<pre><code>## 
##  iter imp variable
##   1   1  carat  cut  color  clarity  depth  table  price  x  y  z
##   1   2  carat  cut  color  clarity  depth  table  price  x  y  z
##   1   3  carat  cut  color  clarity  depth  table  price  x  y  z
##   1   4  carat  cut  color  clarity  depth  table  price  x  y  z
##   1   5  carat  cut  color  clarity  depth  table  price  x  y  z
##   2   1  carat  cut  color  clarity  depth  table  price  x  y  z
##   2   2  carat  cut  color  clarity  depth  table  price  x  y  z
##   2   3  carat  cut  color  clarity  depth  table  price  x  y  z
##   2   4  carat  cut  color  clarity  depth  table  price  x  y  z
##   2   5  carat  cut  color  clarity  depth  table  price  x  y  z
##   3   1  carat  cut  color  clarity  depth  table  price  x  y  z
##   3   2  carat  cut  color  clarity  depth  table  price  x  y  z
##   3   3  carat  cut  color  clarity  depth  table  price  x  y  z
##   3   4  carat  cut  color  clarity  depth  table  price  x  y  z
##   3   5  carat  cut  color  clarity  depth  table  price  x  y  z
##   4   1  carat  cut  color  clarity  depth  table  price  x  y  z
##   4   2  carat  cut  color  clarity  depth  table  price  x  y  z
##   4   3  carat  cut  color  clarity  depth  table  price  x  y  z
##   4   4  carat  cut  color  clarity  depth  table  price  x  y  z
##   4   5  carat  cut  color  clarity  depth  table  price  x  y  z
##   5   1  carat  cut  color  clarity  depth  table  price  x  y  z
##   5   2  carat  cut  color  clarity  depth  table  price  x  y  z
##   5   3  carat  cut  color  clarity  depth  table  price  x  y  z
##   5   4  carat  cut  color  clarity  depth  table  price  x  y  z
##   5   5  carat  cut  color  clarity  depth  table  price  x  y  z</code></pre>
<pre class="r"><code>imp_mice %&gt;%
    complete(action = &quot;long&quot;) %&gt;%
    select(-.id) %&gt;%
    rbind(mis_datos) %&gt;%
    select(carat, depth, price, z, .imp) %&gt;%
    gather(key, value, -.imp) %&gt;%
    ggplot(aes(x = value, color = .imp))+
    geom_density(size = 0.8, alpha = .8) +
    facet_wrap(~ key, scales = &quot;free&quot;) +
    scale_color_brewer(type = &quot;seq&quot;, palette = 8) +
    theme_minimal() + labs(title=&quot;Imputación con media aritmética - variables numéricas&quot;)</code></pre>
<pre><code>## Warning: Removed 56 rows containing non-finite values (stat_density).</code></pre>
<p><img src="../rmarkdown-libs/figure-html4/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>imp_mice %&gt;%
    complete(action = &quot;long&quot;) %&gt;%
    select(-.id) %&gt;%
    select(color, cut, .imp) %&gt;%
    gather(key, value, -.imp) %&gt;%
    ggplot(aes(x = value, fill = .imp))+
    geom_bar(alpha = 0.8, position = position_dodge()) +
    facet_wrap(~ key, scales = &quot;free&quot;) +
    scale_fill_brewer(type = &quot;seq&quot;, palette =8) +
    theme_minimal() + labs(title=&quot;Imputación con moda - variables categóricas&quot;)</code></pre>
<pre><code>## Warning: attributes are not identical across measure variables;
## they will be dropped</code></pre>
<p><img src="../rmarkdown-libs/figure-html4/unnamed-chunk-5-2.png" width="672" /></p>
<p>Se ajusta mejor ¿no? y eso que no fue necesario tocar los parámetros por definición y con sólo 5 iteraciones. El paquete <code>mice</code> tiene un montón de funciones para ajustar el modelo de predicción. Además de los modelos por definición, <code>mice</code> acepta varios tipos de modelamiento, incluyendo <em>modelos bayesianos</em>, <em>análisis lineal discriminante</em>, y modelos de aprendizaje de máquinas más complejos como el <em>Random Forest</em>.</p>
<p>Si les interesa esta aproximacion metanse a leer las <a href="https://cran.r-project.org/web/packages/mice/vignettes/resources.html">viñetas</a>, que están super bien explicadas. Si están pirados, hay un <a href="http://www.stefvanbuuren.nl/mi/FIMD.html">libro</a> del autor (Van Buuren, S.).</p>
</div>
<div id="imputacion-simple-o-multiple-para-pca" class="section level3">
<h3>Imputación simple o múltiple para PCA</h3>
<p>Un problema de las imputaciones múltiples es que dependiendo del trato que daremos a los datos, puede no haber un método estandarizado para lidiar con ellos. Es el caso del análisis de componentes principales (PCA) donde no está muy bien establecida una metodología para lidiar con los NA y donde no hay un método específico de la librería <code>mice</code>. Una aproximación útil es la de utilizar es la librería <a href="http://factominer.free.fr/missMDA/index.html"><code>missMDA</code></a>, un <em>compañero</em> de la excelente librería para PCA <a href="http://factominer.free.fr/index.html"><code>FactoMineR</code></a> de <a href="http://math.agrocampus-ouest.fr/infoglueDeliverLive/membres/Francois.Husson">François Husson</a>, <a href="http://juliejosse.com/">Julie Josse</a> y <a href="http://sebastien.ledien.free.fr">Sébastien Lê</a></p>
<p><code>missMDA</code> permite la imputación de datos de tal manera de que los valores imputados no tengan mayor repercusión en el resultado del PCA utilizando métodos de reducción de la dimensionalidad (para más detalles de cómo lo hace, espabilar y mirar la <a href="http://factominer.free.fr/missMDA/index.html">documentación</a>).</p>
<p>En resumen el método se aplica así::
1. calcular el número de dimensiones a utilizar para la imputación con la función <code>estim_ncpPCA</code>.
2. Completar la base utilizando el número de dimensiones calculada con <code>imputePCA</code>.
3. Visualizar de manera gráfica la <strong>incertidumbre</strong> de la imputación con la función <code>MIPCA</code>.</p>
<p>En el siguiente ejemplo utilizamos una base más apropiada para PCA. Utilizamos la base <code>geno</code> del paquete <code>missMDA</code> que contiene información de genotipos y ambiente de cultivo, con NA’s</p>
<pre class="r"><code>library(missMDA)
data(geno)

nb&lt;-
    geno %&gt;%
    estim_ncpPCA(ncp.max=10)</code></pre>
<pre><code>## Warning in impute(X, ncp = ncp, scale = scale, method = method, threshold =
## threshold, : Stopped after 1000 iterations</code></pre>
<pre class="r"><code>imp_MDA &lt;-
    geno %&gt;%
    imputePCA(ncp = nb$ncp) %&gt;%
    purrr::pluck(1) %&gt;%
    as.tibble()

check_MDA &lt;-
    geno %&gt;%
    MIPCA(ncp=nb$ncp, nboot = 100)

plot(check_MDA)</code></pre>
</div>
</div>
</div>
    
        </div>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="../img/ghost-icon.png" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="../">cabrokiller</a></h4>
                <p>Describe yourself..</p>
        </section>
      </section>
    </footer>
</article>
    
    
    

<div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "\/imputacion-de-datos\/";  
this.page.identifier = "\/imputacion-de-datos\/"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://r-con-r.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      

      
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="../">
      <img src="../hugo-logo.png" alt="R con R" />
      <span>R con R</span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Imputación de datos</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>
    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=Imputaci%c3%b3n%20de%20datos&amp;url=%2fimputacion-de-datos%2f"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=%2fimputacion-de-datos%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="../">EM</a>  <br>
      
    </section>
    <nav class="site-footer-nav">
        <a href="../">Latest Posts</a>
        <a href="https://www.facebook.com/fakeghost" target="_blank" rel="noopener">Facebook</a>
        <a href="https://twitter.com/faketryghost" target="_blank" rel="noopener">Twitter</a>
        <a href="https://github.com/eueung" target="_blank" rel="noopener">Github</a>
        
        
    </nav>  
  </div>
</footer>

</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="../js/jquery.fitvids.js"></script>

<script>hljs.initHighlightingOnLoad();</script>



    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
